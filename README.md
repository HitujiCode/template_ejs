# 開発環境 README
このREADMEでは、プロジェクトの開発環境と使用方法について説明します。

## 概要
このプロジェクトはGulpを用いた開発環境を採用しており、以下の機能を提供しています：
- Sass/SCSSのコンパイル
- EJSテンプレートのHTMLへの変換
- 画像最適化（JPEG/PNG圧縮、SVG最適化、AVIF変換）
- ブラウザの自動リロード（Browser-Sync）
- ファイル監視による自動ビルド

## 必要条件
- Node.js（最新の安定版を推奨）
- npm または yarn

## インストール方法
1. リポジトリをクローンまたはダウンロードします
2. プロジェクトのルートディレクトリで以下のコマンドを実行します：

```bash
npm install
# または
yarn install
```

## プロジェクト構造
```
プロジェクト/
├── src/
│   ├── sass/       # SCSSファイル
│   ├── js/         # JavaScriptファイル
│   ├── ejs/        # EJSテンプレート
│   │   └── data/   # EJSで使用するJSONデータ
│   └── images/     # 画像ファイル
└── dist/           # コンパイル後のファイル（自動生成）
    ├── assets/
    │   ├── css/    # コンパイル後のCSSファイル
    │   ├── js/     # 処理後のJSファイル
    │   └── images/ # 最適化された画像ファイル
    └── *.html      # コンパイル後のHTMLファイル
```

## 使用方法

### 開発モード
開発サーバーを起動し、ファイル変更を監視するには：
```bash
npm run start
# または
npx gulp
```

これにより、ローカルサーバーが起動し、ブラウザが自動的に開きます。ファイルを変更すると自動的にコンパイルされ、ブラウザがリロードされます。

### ビルド
本番用にファイルをビルドするには：

```bash
npm run build
# または
npx gulp build
```

これにより、`dist`ディレクトリが一度クリーンアップされ、すべてのファイルが最適化された状態で再ビルドされます。

### その他のタスク

特定のタスクのみを実行する場合：
```bash
# distディレクトリのクリーンアップ
npx gulp clean

# 画像の最適化のみ
npx gulp images
```

## 機能詳細

### Sass/SCSS
- Dart Sassによるコンパイル
- `@use`/`@forward`によるグロビング対応
- ベンダープレフィックスの自動付与（Autoprefixer）
- メディアクエリの整理（postcss-sort-media-queries）
- CSSプロパティの整理（css-declaration-sorter、SMACSSルール）

### EJS
- 複数のJSONデータファイルの読み込みと利用
- HTMLの整形出力
- エラー通知

### 画像最適化
- JPEG/PNG：品質最適化（Sharp使用、品質75%）
- SVG：SVGO による最適化
- AVIF：次世代フォーマットへの変換（品質75%）

### その他
- ファイル変更の監視と自動タスク実行
- エラー発生時の通知
- ブラウザの自動リロード